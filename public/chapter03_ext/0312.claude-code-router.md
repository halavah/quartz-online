# Claude Code Router - æ™ºèƒ½è¯·æ±‚è·¯ç”±å·¥å…·

> ä¸€ä¸ªå¼ºå¤§çš„å·¥å…·ï¼Œå¯ä»¥å°†Claude Codeè¯·æ±‚è·¯ç”±åˆ°ä¸åŒçš„æ¨¡å‹ï¼Œæ”¯æŒè‡ªå®šä¹‰APIç«¯ç‚¹ã€è´Ÿè½½å‡è¡¡ã€æ•…éšœè½¬ç§»å’Œè¯·æ±‚å®šåˆ¶

## ç›®å½•å¯¼èˆª

1. [ä»€ä¹ˆæ˜¯ Claude Code Routerï¼Ÿ](#1-ä»€ä¹ˆæ˜¯-claude-code-router)
2. [æ ¸å¿ƒåŠŸèƒ½ç‰¹æ€§](#2-æ ¸å¿ƒåŠŸèƒ½ç‰¹æ€§)
3. [ç³»ç»Ÿæ¶æ„](#3-ç³»ç»Ÿæ¶æ„)
4. [å®‰è£…æŒ‡å—](#4-å®‰è£…æŒ‡å—)
5. [é…ç½®è¯´æ˜](#5-é…ç½®è¯´æ˜)
6. [ä½¿ç”¨æ–¹æ³•](#6-ä½¿ç”¨æ–¹æ³•)
7. [æ•…éšœæ’é™¤](#7-æ•…éšœæ’é™¤)

## 1. ä»€ä¹ˆæ˜¯ Claude Code Routerï¼Ÿ

Claude Code Router æ˜¯ä¸€ä¸ªæ™ºèƒ½çš„è¯·æ±‚è·¯ç”±å·¥å…·ï¼Œä¸“ä¸º Claude Code ç”¨æˆ·è®¾è®¡ï¼Œå…è®¸å°†è¯·æ±‚çµæ´»åœ°è·¯ç”±åˆ°ä¸åŒçš„ AI æ¨¡å‹å’Œ API ç«¯ç‚¹ã€‚å®ƒæä¾›äº†è´Ÿè½½å‡è¡¡ã€æ•…éšœè½¬ç§»ã€è¯·æ±‚å®šåˆ¶ç­‰é«˜çº§åŠŸèƒ½ï¼Œè®©ç”¨æˆ·èƒ½å¤Ÿä¼˜åŒ–æ€§èƒ½ã€é™ä½æˆæœ¬å¹¶æé«˜å¯é æ€§ã€‚

### æ ¸å¿ƒä»·å€¼

- **æ™ºèƒ½è·¯ç”±**ï¼šæ ¹æ®ä¸åŒæ¡ä»¶æ™ºèƒ½è·¯ç”±è¯·æ±‚åˆ°æœ€é€‚åˆçš„æ¨¡å‹
- **è´Ÿè½½å‡è¡¡**ï¼šåœ¨å¤šä¸ªæä¾›å•†ä¹‹é—´åˆ†é…è´Ÿè½½ï¼Œæé«˜æ€§èƒ½
- **æ•…éšœè½¬ç§»**ï¼šè‡ªåŠ¨å¤„ç† API æ•…éšœï¼Œç¡®ä¿æœåŠ¡è¿ç»­æ€§
- **æˆæœ¬ä¼˜åŒ–**ï¼šæ ¹æ®æˆæœ¬å’Œæ€§èƒ½è¦æ±‚é€‰æ‹©æœ€ä¼˜è·¯ç”±
- **è¯·æ±‚å®šåˆ¶**ï¼šæ”¯æŒè‡ªå®šä¹‰è¯·æ±‚å‚æ•°å’Œå¤„ç†é€»è¾‘

### è§£å†³çš„ç—›ç‚¹

1. **å•ç‚¹æ•…éšœ**ï¼šä¾èµ–å•ä¸€ API æä¾›å•†å­˜åœ¨é£é™©
2. **æ€§èƒ½ç“¶é¢ˆ**ï¼šæŸäº›æä¾›å•†å“åº”é€Ÿåº¦æ…¢æˆ–ä¸ç¨³å®š
3. **æˆæœ¬æ§åˆ¶**ï¼šä¸åŒæä¾›å•†çš„ä»·æ ¼å·®å¼‚è¾ƒå¤§
4. **åŠŸèƒ½é™åˆ¶**ï¼šæŸäº›æ¨¡å‹åœ¨ç‰¹å®šä»»åŠ¡ä¸Šè¡¨ç°æ›´å¥½
5. **å¤æ‚æ€§ç®¡ç†**ï¼šæ‰‹åŠ¨ç®¡ç†å¤šä¸ª API ç«¯ç‚¹å¾ˆç¹ç

## 2. æ ¸å¿ƒåŠŸèƒ½ç‰¹æ€§

### ğŸ›£ï¸ æ™ºèƒ½è·¯ç”±ç³»ç»Ÿ
- **æ¡ä»¶è·¯ç”±**ï¼šåŸºäºè¯·æ±‚ç±»å‹ã€å¤æ‚åº¦ã€æ—¶é—´ç­‰æ¡ä»¶è·¯ç”±
- **æ¨¡å‹é€‰æ‹©**ï¼šæ ¹æ®ä»»åŠ¡ç‰¹æ€§é€‰æ‹©æœ€é€‚åˆçš„æ¨¡å‹
- **åŠ¨æ€è·¯ç”±**ï¼šå®æ—¶è°ƒæ•´è·¯ç”±ç­–ç•¥
- **è·¯ç”±è§„åˆ™**ï¼šçµæ´»çš„è·¯ç”±è§„åˆ™é…ç½®

### âš–ï¸ è´Ÿè½½å‡è¡¡
- **è½®è¯¢ç®—æ³•**ï¼šåœ¨å¤šä¸ªæä¾›å•†é—´è½®è¯¢åˆ†é…è¯·æ±‚
- **åŠ æƒåˆ†é…**ï¼šæ ¹æ®æ€§èƒ½æˆ–æˆæœ¬æƒé‡åˆ†é…è¯·æ±‚
- **å¥åº·æ£€æŸ¥**ï¼šç›‘æ§æä¾›å•†å¥åº·çŠ¶æ€
- **åŠ¨æ€è°ƒæ•´**ï¼šæ ¹æ®å®æ—¶æ€§èƒ½è°ƒæ•´åˆ†é…ç­–ç•¥

### ğŸ”„ æ•…éšœè½¬ç§»
- **è‡ªåŠ¨æ£€æµ‹**ï¼šæ£€æµ‹ API æ•…éšœå’Œè¶…æ—¶
- **å¿«é€Ÿåˆ‡æ¢**ï¼šè‡ªåŠ¨åˆ‡æ¢åˆ°å¤‡ç”¨æä¾›å•†
- **é‡è¯•æœºåˆ¶**ï¼šæ™ºèƒ½é‡è¯•å¤±è´¥çš„è¯·æ±‚
- **é™çº§ç­–ç•¥**ï¼šåœ¨èµ„æºä¸è¶³æ—¶çš„é™çº§å¤„ç†

### ğŸ’° æˆæœ¬ä¼˜åŒ–
- **æˆæœ¬æ¯”è¾ƒ**ï¼šå®æ—¶æ¯”è¾ƒä¸åŒæä¾›å•†çš„æˆæœ¬
- **é¢„ç®—æ§åˆ¶**ï¼šè®¾ç½®ä½¿ç”¨é¢„ç®—å’Œé™åˆ¶
- **æˆæœ¬åˆ†æ**ï¼šè¯¦ç»†çš„ä½¿ç”¨æˆæœ¬åˆ†æ
- **ä¼˜åŒ–å»ºè®®**ï¼šæä¾›æˆæœ¬ä¼˜åŒ–å»ºè®®

### ğŸ›ï¸ è¯·æ±‚å®šåˆ¶
- **å‚æ•°è°ƒæ•´**ï¼šè‡ªå®šä¹‰è¯·æ±‚å‚æ•°
- **å†…å®¹å¤„ç†**ï¼šè¯·æ±‚å†…å®¹çš„é¢„å¤„ç†å’Œåå¤„ç†
- **å“åº”è½¬æ¢**ï¼šå“åº”æ ¼å¼çš„è½¬æ¢å’Œé€‚é…
- **ç¼“å­˜æœºåˆ¶**ï¼šæ™ºèƒ½ç¼“å­˜æé«˜å“åº”é€Ÿåº¦

### ğŸ“Š ç›‘æ§å’Œåˆ†æ
- **å®æ—¶ç›‘æ§**ï¼šå®æ—¶ç›‘æ§è¯·æ±‚çŠ¶æ€å’Œæ€§èƒ½
- **ç»Ÿè®¡åˆ†æ**ï¼šè¯¦ç»†çš„ä½¿ç”¨ç»Ÿè®¡å’Œåˆ†æ
- **æ€§èƒ½æŠ¥å‘Š**ï¼šå®šæœŸçš„æ€§èƒ½è¯„ä¼°æŠ¥å‘Š
- **å‘Šè­¦ç³»ç»Ÿ**ï¼šå¼‚å¸¸æƒ…å†µçš„å‘Šè­¦é€šçŸ¥

## 3. ç³»ç»Ÿæ¶æ„

### æŠ€æœ¯æ¶æ„
```
Claude Code Client
    â†“
Claude Code Router
    â”œâ”€â”€ Request Receiver
    â”œâ”€â”€ Route Engine
    â”œâ”€â”€ Load Balancer
    â”œâ”€â”€ Failover Manager
    â””â”€â”€ Analytics Engine
    â†“
Multiple AI Providers
    â”œâ”€â”€ OpenAI API
    â”œâ”€â”€ Anthropic API
    â”œâ”€â”€ OpenRouter API
    â”œâ”€â”€ Custom APIs
    â””â”€â”€ Local Models
```

### æ ¸å¿ƒç»„ä»¶

#### Route Engineï¼ˆè·¯ç”±å¼•æ“ï¼‰
- **è§„åˆ™è§£æ**ï¼šè§£æè·¯ç”±è§„åˆ™å’Œæ¡ä»¶
- **è¯·æ±‚åˆ†æ**ï¼šåˆ†æè¯·æ±‚å†…å®¹å’Œç±»å‹
- **è·¯ç”±å†³ç­–**ï¼šåšå‡ºè·¯ç”±å†³ç­–
- **ç­–ç•¥æ‰§è¡Œ**ï¼šæ‰§è¡Œè·¯ç”±ç­–ç•¥

#### Load Balancerï¼ˆè´Ÿè½½å‡è¡¡å™¨ï¼‰
- **åˆ†é…ç®—æ³•**ï¼šå®ç°å„ç§è´Ÿè½½å‡è¡¡ç®—æ³•
- **å¥åº·æ£€æŸ¥**ï¼šç›‘æ§æä¾›å•†å¥åº·çŠ¶æ€
- **æƒé‡ç®¡ç†**ï¼šç®¡ç†å’Œè°ƒæ•´æƒé‡
- **æ€§èƒ½ç›‘æ§**ï¼šç›‘æ§æ€§èƒ½æŒ‡æ ‡

#### Failover Managerï¼ˆæ•…éšœè½¬ç§»ç®¡ç†å™¨ï¼‰
- **æ•…éšœæ£€æµ‹**ï¼šæ£€æµ‹ API æ•…éšœ
- **åˆ‡æ¢é€»è¾‘**ï¼šæ‰§è¡Œæ•…éšœåˆ‡æ¢
- **æ¢å¤æ£€æµ‹**ï¼šæ£€æµ‹æœåŠ¡æ¢å¤
- **çŠ¶æ€ç®¡ç†**ï¼šç®¡ç†æä¾›å•†çŠ¶æ€

#### Analytics Engineï¼ˆåˆ†æå¼•æ“ï¼‰
- **æ•°æ®æ”¶é›†**ï¼šæ”¶é›†è¯·æ±‚å’Œå“åº”æ•°æ®
- **ç»Ÿè®¡åˆ†æ**ï¼šè¿›è¡Œç»Ÿè®¡åˆ†æ
- **æŠ¥å‘Šç”Ÿæˆ**ï¼šç”Ÿæˆå„ç±»æŠ¥å‘Š
- **è¶‹åŠ¿åˆ†æ**ï¼šåˆ†æä½¿ç”¨è¶‹åŠ¿

## 4. å®‰è£…æŒ‡å—

### 4.1 ç³»ç»Ÿè¦æ±‚

#### æœ€ä½è¦æ±‚
- **æ“ä½œç³»ç»Ÿ**ï¼šLinux (Ubuntu 18.04+), macOS 10.15+, Windows 10+
- **å¤„ç†å™¨**ï¼š2æ ¸å¿ƒ CPU
- **å†…å­˜**ï¼š4GB RAM
- **å­˜å‚¨ç©ºé—´**ï¼š1GB å¯ç”¨ç©ºé—´
- **ç½‘ç»œ**ï¼šç¨³å®šçš„äº’è”ç½‘è¿æ¥

#### æ¨èé…ç½®
- **æ“ä½œç³»ç»Ÿ**ï¼šLinux (Ubuntu 20.04+), macOS 12+, Windows 11+
- **å¤„ç†å™¨**ï¼š4æ ¸å¿ƒæˆ–æ›´å¤š CPU
- **å†…å­˜**ï¼š8GB RAM æˆ–æ›´å¤š
- **å­˜å‚¨ç©ºé—´**ï¼š5GB å¯ç”¨ç©ºé—´
- **ç½‘ç»œ**ï¼šé«˜é€Ÿå®½å¸¦è¿æ¥

#### ä¾èµ–è¦æ±‚
- **Node.js**ï¼š16.0.0 æˆ–æ›´é«˜ç‰ˆæœ¬
- **Python**ï¼š3.8 æˆ–æ›´é«˜ç‰ˆæœ¬ï¼ˆå¯é€‰ï¼‰
- **Docker**ï¼š20.10+ï¼ˆå¯é€‰ï¼‰

### 4.2 å®‰è£…æ–¹å¼

#### æ–¹å¼1ï¼šnpm å…¨å±€å®‰è£…
```bash
# å®‰è£…
npm install -g claude-code-router

# éªŒè¯å®‰è£…
claude-code-router --version
```

#### æ–¹å¼2ï¼šDocker å®‰è£…
```bash
# æ‹‰å–é•œåƒ
docker pull musistudio/claude-code-router

# è¿è¡Œå®¹å™¨
docker run -d \
  --name claude-router \
  -p 8080:8080 \
  -v $(pwd)/config:/app/config \
  musistudio/claude-code-router
```

#### æ–¹å¼3ï¼šæºç å®‰è£…
```bash
# å…‹éš†ä»“åº“
git clone https://github.com/musistudio/claude-code-router.git
cd claude-code-router

# å®‰è£…ä¾èµ–
npm install

# æ„å»ºé¡¹ç›®
npm run build

# å¯åŠ¨æœåŠ¡
npm start
```

### 4.3 åˆå§‹é…ç½®

#### åˆ›å»ºé…ç½®æ–‡ä»¶
```bash
# åˆå§‹åŒ–é…ç½®
claude-code-router init

# è¿™å°†åœ¨å½“å‰ç›®å½•åˆ›å»º config.yaml æ–‡ä»¶
```

#### åŸºç¡€é…ç½®ç¤ºä¾‹
```yaml
# config.yaml
server:
  host: "0.0.0.0"
  port: 8080
  workers: 4

providers:
  openai:
    name: "OpenAI"
    api_key: "${OPENAI_API_KEY}"
    base_url: "https://api.openai.com/v1"
    models: ["gpt-4", "gpt-3.5-turbo"]
    timeout: 30000
    max_retries: 3

  anthropic:
    name: "Anthropic"
    api_key: "${ANTHROPIC_API_KEY}"
    base_url: "https://api.anthropic.com"
    models: ["claude-3-opus-20240229", "claude-3-sonnet-20240229"]
    timeout: 30000
    max_retries: 3

routing:
  default_provider: "anthropic"
  rules:
    - name: "coding_tasks"
      condition: "task_type == 'coding'"
      provider: "anthropic"
      model: "claude-3-opus-20240229"

    - name: "simple_tasks"
      condition: "complexity < 5"
      provider: "openai"
      model: "gpt-3.5-turbo"
```

## 5. é…ç½®è¯´æ˜

### 5.1 æä¾›å•†é…ç½®

#### OpenAI é…ç½®
```yaml
providers:
  openai:
    name: "OpenAI GPT"
    api_key: "sk-your-key"
    base_url: "https://api.openai.com/v1"
    models:
      - name: "gpt-4"
        cost_per_1k_input: 0.03
        cost_per_1k_output: 0.06
        max_tokens: 8192
      - name: "gpt-3.5-turbo"
        cost_per_1k_input: 0.001
        cost_per_1k_output: 0.002
        max_tokens: 4096
    timeout: 30000
    max_retries: 3
    rate_limit:
      requests_per_minute: 3500
      tokens_per_minute: 90000
```

#### Anthropic é…ç½®
```yaml
providers:
  anthropic:
    name: "Anthropic Claude"
    api_key: "sk-ant-your-key"
    base_url: "https://api.anthropic.com"
    models:
      - name: "claude-3-opus-20240229"
        cost_per_1k_input: 0.015
        cost_per_1k_output: 0.075
        max_tokens: 4096
      - name: "claude-3-sonnet-20240229"
        cost_per_1k_input: 0.003
        cost_per_1k_output: 0.015
        max_tokens: 4096
    timeout: 30000
    max_retries: 3
```

#### è‡ªå®šä¹‰æä¾›å•†é…ç½®
```yaml
providers:
  custom_provider:
    name: "Custom LLM Provider"
    type: "openai_compatible"
    api_key: "your-custom-key"
    base_url: "https://your-provider.com/v1"
    models:
      - name: "custom-model"
        cost_per_1k_input: 0.01
        cost_per_1k_output: 0.02
        max_tokens: 2048
    headers:
      "X-Custom-Header": "value"
    timeout: 60000
    max_retries: 2
```

### 5.2 è·¯ç”±è§„åˆ™é…ç½®

#### åŸºç¡€è·¯ç”±è§„åˆ™
```yaml
routing:
  default_provider: "anthropic"
  default_model: "claude-3-sonnet-20240229"

  rules:
    - name: "complex_coding"
      condition: |
        task_type == 'coding' and
        (file_count > 5 or line_count > 1000)
      provider: "anthropic"
      model: "claude-3-opus-20240229"
      priority: 10

    - name: "simple_coding"
      condition: |
        task_type == 'coding' and
        file_count <= 5 and line_count <= 1000
      provider: "openai"
      model: "gpt-4"
      priority: 8

    - name: "cost_optimized"
      condition: "cost_priority == 'high'"
      provider: "openai"
      model: "gpt-3.5-turbo"
      priority: 5

    - name: "speed_priority"
      condition: "speed_priority == 'high'"
      provider: "fast_provider"
      model: "fast-model"
      priority: 9
```

#### é«˜çº§è·¯ç”±æ¡ä»¶
```yaml
routing:
  rules:
    - name: "time_based_routing"
      condition: |
        current_hour >= 9 and current_hour <= 17
      provider: "anthropic"
      model: "claude-3-opus-20240229"

    - name: "weekend_routing"
      condition: "is_weekend"
      provider: "openai"
      model: "gpt-4"

    - name: "large_context"
      condition: "total_tokens > 8000"
      provider: "anthropic"
      model: "claude-3-opus-20240229"

    - name: "multilingual"
      condition: "languages.length > 1"
      provider: "anthropic"
      model: "claude-3-sonnet-20240229"
```

### 5.3 è´Ÿè½½å‡è¡¡é…ç½®

#### è½®è¯¢ç­–ç•¥
```yaml
load_balancing:
  strategy: "round_robin"
  providers:
    - name: "anthropic"
      weight: 2
      models: ["claude-3-opus-20240229"]
    - name: "openai"
      weight: 1
      models: ["gpt-4"]
    - name: "openrouter"
      weight: 1
      models: ["anthropic/claude-3-opus"]

  health_check:
    enabled: true
    interval: 60  # seconds
    timeout: 10   # seconds
    failure_threshold: 3
    recovery_threshold: 2
```

#### åŠ æƒç­–ç•¥
```yaml
load_balancing:
  strategy: "weighted_round_robin"
  weights:
    anthropic: 3  # 60% of requests
    openai: 2     # 40% of requests

  adaptive_weights:
    enabled: true
    metrics: ["response_time", "success_rate", "cost"]
    update_interval: 300  # seconds
```

### 5.4 æ•…éšœè½¬ç§»é…ç½®

#### æ•…éšœè½¬ç§»ç­–ç•¥
```yaml
failover:
  enabled: true
  max_retries: 3
  retry_delay: 1000  # milliseconds

  providers:
    primary: "anthropic"
    fallback:
      - provider: "openai"
        condition: "timeout || error_rate > 0.1"
      - provider: "openrouter"
        condition: "cost_budget_exceeded"

  circuit_breaker:
    enabled: true
    failure_threshold: 5
    recovery_timeout: 60000  # milliseconds
    half_open_max_calls: 3
```

## 6. ä½¿ç”¨æ–¹æ³•

### 6.1 åŸºç¡€ä½¿ç”¨

#### å¯åŠ¨è·¯ç”±æœåŠ¡
```bash
# ä½¿ç”¨é»˜è®¤é…ç½®å¯åŠ¨
claude-code-router

# ä½¿ç”¨æŒ‡å®šé…ç½®æ–‡ä»¶
claude-code-router --config /path/to/config.yaml

# å¯åŠ¨è°ƒè¯•æ¨¡å¼
claude-code-router --debug

# æŒ‡å®šç«¯å£
claude-code-router --port 9090
```

#### é…ç½® Claude Code ä½¿ç”¨è·¯ç”±
```bash
# è®¾ç½®ç¯å¢ƒå˜é‡
export ANTHROPIC_API_URL=http://localhost:8080/anthropic
export OPENAI_API_BASE=http://localhost:8080/openai

# æˆ–åœ¨ Claude Code é…ç½®ä¸­è®¾ç½®
```

### 6.2 API ä½¿ç”¨

#### å‘é€è¯·æ±‚åˆ°è·¯ç”±å™¨
```bash
# é€šè¿‡è·¯ç”±å™¨å‘é€è¯·æ±‚
curl -X POST http://localhost:8080/v1/messages \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer your-api-key" \
  -d '{
    "model": "claude-3-sonnet-20240229",
    "messages": [{"role": "user", "content": "Hello!"}],
    "max_tokens": 1000
  }'
```

#### æŒ‡å®šè·¯ç”±ç­–ç•¥
```bash
# åœ¨è¯·æ±‚ä¸­æŒ‡å®šè·¯ç”±å‚æ•°
curl -X POST http://localhost:8080/v1/messages \
  -H "Content-Type: application/json" \
  -H "X-Router-Strategy: cost_optimized" \
  -H "X-Router-Priority: high" \
  -d '{
    "model": "auto",
    "messages": [{"role": "user", "content": "Help me code"}]
  }'
```

### 6.3 ç›‘æ§å’Œç®¡ç†

#### æŸ¥çœ‹è·¯ç”±çŠ¶æ€
```bash
# æŸ¥çœ‹æ‰€æœ‰æä¾›å•†çŠ¶æ€
curl http://localhost:8080/status

# æŸ¥çœ‹è·¯ç”±ç»Ÿè®¡
curl http://localhost:8080/stats

# æŸ¥çœ‹å¥åº·æ£€æŸ¥çŠ¶æ€
curl http://localhost:8080/health
```

#### åŠ¨æ€é…ç½®æ›´æ–°
```bash
# æ›´æ–°è·¯ç”±è§„åˆ™
curl -X PUT http://localhost:8080/config/routing \
  -H "Content-Type: application/json" \
  -d '{
    "rules": [
      {
        "name": "new_rule",
        "condition": "task_type == 'analysis'",
        "provider": "anthropic",
        "model": "claude-3-opus-20240229"
      }
    ]
  }'
```

### 6.4 é«˜çº§åŠŸèƒ½

#### è¯·æ±‚é¢„å¤„ç†å’Œåå¤„ç†
```yaml
middleware:
  preprocess:
    - name: "request_logging"
      config:
        log_level: "info"

    - name: "content_filter"
      config:
        blocked_patterns: ["password", "secret"]

  postprocess:
    - name: "response_caching"
      config:
        ttl: 300  # seconds

    - name: "cost_tracking"
      config:
        per_user_limits: true
```

#### ç¼“å­˜é…ç½®
```yaml
cache:
  enabled: true
  type: "redis"  # memory, redis, file
  redis:
    host: "localhost"
    port: 6379
    db: 0

  rules:
    - condition: "request_hash in cache"
      action: "return_cached"
      ttl: 300

    - condition: "response_length < 1000"
      action: "cache_response"
      ttl: 600
```

## 7. æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. è·¯ç”±å™¨å¯åŠ¨å¤±è´¥
```bash
# æ£€æŸ¥é…ç½®æ–‡ä»¶è¯­æ³•
claude-code-router validate --config config.yaml

# æ£€æŸ¥ç«¯å£å ç”¨
lsof -i :8080

# æŸ¥çœ‹è¯¦ç»†é”™è¯¯æ—¥å¿—
claude-code-router --debug
```

#### 2. æä¾›å•†è¿æ¥å¤±è´¥
```bash
# æµ‹è¯•æä¾›å•†è¿æ¥
curl -H "Authorization: Bearer your-key" https://api.anthropic.com/v1/messages

# æ£€æŸ¥ API å¯†é’¥
claude-code-router test-provider anthropic

# æŸ¥çœ‹æä¾›å•†çŠ¶æ€
curl http://localhost:8080/providers/status
```

#### 3. è·¯ç”±è§„åˆ™ä¸ç”Ÿæ•ˆ
```bash
# éªŒè¯è·¯ç”±è§„åˆ™
claude-code-router validate-rules

# æŸ¥çœ‹è·¯ç”±å†³ç­–æ—¥å¿—
grep "routing_decision" logs/router.log

# æµ‹è¯•è·¯ç”±æ¡ä»¶
curl -X POST http://localhost:8080/test/route \
  -d '{
    "request": {"content": "test"},
    "condition": "task_type == '\''coding'\''"
  }'
```

#### 4. æ€§èƒ½é—®é¢˜
```bash
# æŸ¥çœ‹æ€§èƒ½æŒ‡æ ‡
curl http://localhost:8080/metrics

# åˆ†ææ…¢è¯·æ±‚
grep "slow_request" logs/router.log

# ä¼˜åŒ–é…ç½®
claude-code-router optimize --config config.yaml
```

### è°ƒè¯•å·¥å…·

#### è·¯ç”±æµ‹è¯•
```bash
# æµ‹è¯•ç‰¹å®šè·¯ç”±
claude-code-router test-route \
  --request "Help me debug this code" \
  --condition "task_type == 'coding'"

# æ¨¡æ‹Ÿè¯·æ±‚
claude-code-router simulate \
  --provider anthropic \
  --model claude-3-sonnet-20240229 \
  --message "Test message"
```

#### é…ç½®éªŒè¯
```bash
# éªŒè¯å®Œæ•´é…ç½®
claude-code-router validate --full

# éªŒè¯ç‰¹å®šéƒ¨åˆ†
claude-code-router validate --section providers
claude-code-router validate --section routing
claude-code-router validate --section load_balancing
```

## æ›´æ–°æ—¥å¿—

### v2.1.0 (æœ€æ–°)
- ğŸ‰ æ–°å¢æ™ºèƒ½è´Ÿè½½å‡è¡¡ç®—æ³•
- âœ¨ æ”¯æŒåŠ¨æ€æƒé‡è°ƒæ•´
- ğŸ”§ æ”¹è¿›æ•…éšœè½¬ç§»æœºåˆ¶
- ğŸ› ä¿®å¤é…ç½®çƒ­é‡è½½é—®é¢˜

### v2.0.0
- ğŸš€ å…¨æ–°çš„è·¯ç”±å¼•æ“
- âœ¨ æ”¯æŒä¸­é—´ä»¶ç³»ç»Ÿ
- ğŸ¨ é‡æ„é…ç½®æ ¼å¼
- ğŸ“Š å¢å¼ºç›‘æ§åŠŸèƒ½

### v1.5.0
- ğŸ’¾ æ–°å¢ç¼“å­˜æ”¯æŒ
- ğŸ” æ”¹è¿›è·¯ç”±æ¡ä»¶
- âš¡ æ€§èƒ½ä¼˜åŒ–
- ğŸ“š å®Œå–„æ–‡æ¡£

### v1.0.0
- ğŸ‰ é¦–ä¸ªå…¬å¼€å‘å¸ƒ
- âš¡ åŸºç¡€è·¯ç”±åŠŸèƒ½
- ğŸ”§ æä¾›å•†ç®¡ç†
- ğŸ“‹ é…ç½®ç³»ç»Ÿ

## è´¡çŒ®æŒ‡å—

æ¬¢è¿ä¸º Claude Code Router é¡¹ç›®è´¡çŒ®ä»£ç ï¼

### å¼€å‘ç¯å¢ƒ
```bash
# å…‹éš†ä»“åº“
git clone https://github.com/musistudio/claude-code-router.git
cd claude-code-router

# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æ¨¡å¼
npm run dev

# è¿è¡Œæµ‹è¯•
npm test
```

### ä»£ç è´¡çŒ®
1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
3. ç¼–å†™æµ‹è¯•
4. æäº¤ Pull Request

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚è¯¦æƒ…è¯·å‚é˜… [LICENSE](https://github.com/musistudio/claude-code-router/blob/main/LICENSE) æ–‡ä»¶ã€‚

## ç›¸å…³èµ„æº

- [GitHub ä»“åº“](https://github.com/musistudio/claude-code-router)
- [API æ–‡æ¡£](https://claude-code-router.docs.com/)
- [ç”¨æˆ·ç¤¾åŒº](https://github.com/musistudio/claude-code-router/discussions)
- [é…ç½®ç¤ºä¾‹](https://github.com/musistudio/claude-code-router/tree/main/examples)

## è‡´è°¢

æ„Ÿè°¢ä»¥ä¸‹é¡¹ç›®å’Œç¤¾åŒºçš„æ”¯æŒï¼š
- [Claude Code](https://github.com/anthropics/claude-code) - æ ¸å¿ƒå¹³å°
- [OpenAI API](https://openai.com/api/) - API æ¥å£
- [Anthropic API](https://docs.anthropic.com/claude/reference) - API æ¥å£
- å¼€æºç¤¾åŒºçš„è´¡çŒ®è€…ä»¬

---

> ğŸ’¡ **æç¤º**: Claude Code Router æ˜¯ä¸€ä¸ªæ´»è·ƒå¼€å‘çš„å¼€æºé¡¹ç›®ï¼Œå¦‚æœä½ è§‰å¾—æœ‰ç”¨ï¼Œè¯·è€ƒè™‘ç»™é¡¹ç›®ä¸€ä¸ª Starï¼Œæˆ–è€…å‚ä¸è´¡çŒ®ä»£ç ï¼è®© AI è¯·æ±‚è·¯ç”±æ›´åŠ æ™ºèƒ½å’Œé«˜æ•ˆï¼