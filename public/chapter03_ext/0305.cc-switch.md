# CC-Switch - Claude Code与Codex配置切换神器

> 专业的AI编程助手配置管理工具，支持Claude Code和Codex的一键切换、多设备同步、可视化配置管理，让复杂的配置变得简单易用

## 目录导航

1. [什么是 CC-Switch？](#1-什么是-cc-switch)
2. [核心功能特性](#2-核心功能特性)
3. [系统架构](#3-系统架构)
4. [安装指南](#4-安装指南)
5. [使用方法](#5-使用方法)
6. [配置管理](#6-配置管理)
7. [多设备同步](#7-多设备同步)
8. [故障排除](#8-故障排除)

## 1. 什么是 CC-Switch？

CC-Switch 是一款专为 AI 编程助手用户设计的配置管理工具，解决了在 Claude Code、Codex、Gemini 等多个 AI 编程工具之间切换时配置繁琐的问题。通过直观的图形界面和强大的配置管理功能，让用户能够轻松管理多个编程助手的配置。

### 核心价值

- **一键切换**：在不同 AI 编程助手间快速切换配置
- **多设备同步**：配置信息云端同步，多设备一致体验
- **可视化管理**：图形化界面，告别复杂的环境变量配置
- **安全保障**：API 密钥加密存储，安全可靠
- **单数据源**：SSOT (Single Source of Truth) 设计理念

### 解决的痛点

1. **配置复杂性**：传统方式需要手动设置环境变量
2. **切换繁琐**：在不同工具间切换需要重新配置
3. **多设备管理**：不同设备间配置难以同步
4. **安全风险**：API 密钥明文存储存在安全隐患
5. **配置错误**：手动配置容易出错，难以排查

## 2. 核心功能特性

### 🔄 一键配置切换
- **快速切换**：单击即可在 Claude Code、Codex、Gemini 间切换
- **配置预设**：保存常用配置组合，快速应用
- **智能检测**：自动检测当前环境配置状态
- **配置验证**：切换前验证配置有效性

### 📱 多设备同步
- **云端同步**：配置信息加密存储在云端
- **实时同步**：配置变更实时同步到所有设备
- **离线支持**：支持离线模式，联网后自动同步
- **冲突解决**：智能处理配置冲突

### 🎨 可视化配置管理
- **图形界面**：直观的配置管理界面
- **配置分类**：按功能模块分类管理配置
- **批量操作**：支持批量导入、导出、修改配置
- **配置模板**：提供常用配置模板

### 🔒 安全保障
- **加密存储**：所有敏感信息 AES 加密存储
- **密钥管理**：安全的 API 密钥管理机制
- **访问控制**：支持密码保护和生物识别
- **审计日志**：记录所有配置变更操作

### ⚡ 高级功能
- **原子操作**：配置更新的原子写入，防止损坏
- **事务回滚**：配置错误时自动回滚到上一个稳定状态
- **备份恢复**：自动备份配置，支持一键恢复
- **性能监控**：实时监控配置工具性能

### 🛠️ 开发者友好
- **CLI 支持**：提供命令行接口
- **API 接口**：开放 API 供第三方工具集成
- **插件系统**：支持插件扩展功能
- **脚本支持**：支持自动化脚本操作

## 3. 系统架构

### 技术架构
```
Frontend (Electron/React)
    ↓
Backend Service (Node.js/TypeScript)
    ↓
Configuration Engine
    ├── Storage Layer
    ├── Encryption Layer
    ├── Sync Engine
    └── Validation Engine
    ↓
Cloud Storage (Encrypted)
```

### 数据流设计
```
用户操作 → Frontend UI → Backend API → Config Engine → Storage
    ↑                                                        ↓
    ←─── Sync Engine ←─── Cloud Storage ←─── Other Devices ←─┘
```

### 核心组件

#### 配置引擎 (Configuration Engine)
- **配置解析器**：解析不同格式的配置文件
- **配置验证器**：验证配置参数的合法性
- **配置转换器**：在不同格式间转换配置
- **配置合并器**：智能合并配置文件

#### 同步引擎 (Sync Engine)
- **冲突检测**：检测配置冲突
- **版本控制**：管理配置版本历史
- **增量同步**：只同步变更的部分
- **离线缓存**：离线模式下的配置缓存

#### 加密层 (Encryption Layer)
- **数据加密**：使用 AES-256 加密敏感数据
- **密钥管理**：安全的密钥生成和管理
- **身份认证**：支持多种认证方式
- **访问控制**：细粒度的权限控制

## 4. 安装指南

### 4.1 系统要求

#### 支持平台
- **Windows**：Windows 10 1903 或更高版本
- **macOS**：macOS 10.15 或更高版本
- **Linux**：Ubuntu 18.04+, CentOS 7+, Debian 9+

#### 硬件要求
- **处理器**：64位 CPU
- **内存**：4GB RAM (推荐 8GB)
- **存储空间**：500MB 可用空间
- **网络**：互联网连接（用于同步功能）

### 4.2 安装方式

#### 方式1：官方安装包

##### Windows 安装
1. 访问 [GitHub Releases](https://github.com/farion1231/cc-switch/releases)
2. 下载 `CC-Switch-Setup-x.x.x.exe`
3. 运行安装程序，按提示完成安装
4. 启动应用进行初始配置

##### macOS 安装
```bash
# 使用 Homebrew 安装（推荐）
brew tap farion1231/ccswitch
brew install --cask cc-switch

# 或手动下载安装
# 下载 CC-Switch-x.x.x.dmg
# 双击挂载并拖拽到 Applications 文件夹
```

##### Linux 安装
```bash
# Ubuntu/Debian
wget https://github.com/farion1231/cc-switch/releases/latest/download/cc-switch_x.x.x_amd64.deb
sudo dpkg -i cc-switch_x.x.x_amd64.deb

# CentOS/RHEL
wget https://github.com/farion1231/cc-switch/releases/latest/download/cc-switch-x.x.x.x86_64.rpm
sudo rpm -i cc-switch-x.x.x.x86_64.rpm

# 或使用 AppImage
wget https://github.com/farion1231/cc-switch/releases/latest/download/cc-switch-x.x.x.AppImage
chmod +x cc-switch-x.x.x.AppImage
./cc-switch-x.x.x.AppImage
```

#### 方式2：包管理器安装

```bash
# npm 全局安装
npm install -g @ccswitch/cli

# yarn 全局安装
yarn global add @ccswitch/cli

# 验证安装
cc-switch --version
```

#### 方式3：源码编译

```bash
# 克隆仓库
git clone https://github.com/farion1231/cc-switch.git
cd cc-switch

# 安装依赖
npm install

# 开发模式运行
npm run dev

# 构建生产版本
npm run build
npm run package
```

### 4.3 首次配置

1. **启动应用**
   ```bash
   # 命令行启动
   cc-switch

   # 或从应用菜单启动
   ```

2. **创建账户**
   - 选择"创建新账户"
   - 设置用户名和密码
   - 配置安全选项

3. **导入现有配置**
   - 自动检测现有 AI 工具配置
   - 选择要导入的配置项
   - 验证导入的配置

4. **设置同步**
   - 登录云同步账户
   - 选择同步选项
   - 完成初始同步

## 5. 使用方法

### 5.1 基础使用

#### 图形界面操作
1. **主界面概览**
   - 左侧：配置列表和分类
   - 中间：配置详情和编辑区域
   - 右侧：操作按钮和状态信息

2. **添加新配置**
   - 点击"添加配置"按钮
   - 选择配置类型（Claude Code、Codex、Gemini等）
   - 填写配置信息
   - 测试配置有效性
   - 保存配置

3. **切换配置**
   - 在配置列表中选择目标配置
   - 点击"应用配置"按钮
   - 确认切换操作
   - 等待切换完成

#### 命令行操作
```bash
# 查看所有配置
cc-switch list

# 切换到指定配置
cc-switch switch claude-code-prod

# 添加新配置
cc-switch add --name gemini-dev --provider gemini --api-key your-key

# 删除配置
cc-switch delete --name old-config

# 导出配置
cc-switch export --file backup.json

# 导入配置
cc-switch import --file backup.json
```

### 5.2 高级功能

#### 配置模板管理
1. **创建模板**
   ```bash
   # 从现有配置创建模板
   cc-switch template create --name production --source claude-code-config
   ```

2. **应用模板**
   ```bash
   # 应用模板创建新配置
   cc-switch template apply --name production --target new-config
   ```

#### 批量操作
1. **批量导入**
   ```bash
   # 从目录批量导入配置文件
   cc-switch batch import --dir ./configs/
   ```

2. **批量更新**
   ```bash
   # 批量更新 API 密钥
   cc-switch batch update --field api-key --value new-key --provider openai
   ```

#### 配置验证
```bash
# 验证所有配置
cc-switch validate --all

# 验证指定配置
cc-switch validate --name claude-code-prod

# 详细验证报告
cc-switch validate --name claude-code-prod --verbose
```

### 5.3 自动化脚本

#### Shell 脚本集成
```bash
#!/bin/bash
# 开发环境配置切换脚本

# 切换到开发配置
cc-switch switch dev-environment

# 验证配置
if cc-switch validate --name dev-environment; then
    echo "开发环境配置切换成功"
else
    echo "配置切换失败，请检查配置"
    exit 1
fi

# 启动开发工具
code . &
```

#### CI/CD 集成
```yaml
# GitHub Actions 示例
- name: Setup AI Coding Environment
  run: |
    # 安装 CC-Switch
    npm install -g @ccswitch/cli

    # 导入生产配置
    cc-switch import --file ./configs/production.json

    # 切换到生产配置
    cc-switch switch production

    # 验证配置
    cc-switch validate --all
```

## 6. 配置管理

### 6.1 配置文件结构

#### Claude Code 配置
```json
{
  "name": "claude-code-prod",
  "provider": "anthropic",
  "type": "claude-code",
  "settings": {
    "api_key": "sk-ant-xxxxx",
    "model": "claude-3-opus-20240229",
    "max_tokens": 4096,
    "temperature": 0.1,
    "base_url": "https://api.anthropic.com"
  },
  "environment": {
    "ANTHROPIC_API_KEY": "sk-ant-xxxxx",
    "CLAUDE_MODEL": "claude-3-opus-20240229"
  },
  "metadata": {
    "created_at": "2025-12-22T10:00:00Z",
    "updated_at": "2025-12-22T15:30:00Z",
    "version": "1.0.0"
  }
}
```

#### Codex 配置
```json
{
  "name": "codex-dev",
  "provider": "openai",
  "type": "codex",
  "settings": {
    "api_key": "sk-xxxxx",
    "model": "code-davinci-002",
    "max_tokens": 2048,
    "temperature": 0.2,
    "base_url": "https://api.openai.com/v1"
  },
  "environment": {
    "OPENAI_API_KEY": "sk-xxxxx",
    "OPENAI_MODEL": "code-davinci-002"
  }
}
```

### 6.2 配置最佳实践

#### 命名规范
- **环境分类**：`prod`, `dev`, `test`, `staging`
- **用途描述**：`web-development`, `mobile-development`, `data-analysis`
- **版本标记**：`v1.0`, `v2.1`, `latest`

#### 示例命名
```bash
claude-code-prod-web
codex-dev-mobile
gemini-test-data-analysis
claude-code-staging-api-v2
```

#### 配置分组
```json
{
  "groups": {
    "development": [
      "claude-code-dev",
      "codex-dev",
      "gemini-dev"
    ],
    "production": [
      "claude-code-prod",
      "codex-prod"
    ],
    "testing": [
      "claude-code-test",
      "gemini-test"
    ]
  }
}
```

### 6.3 配置验证规则

#### API 密钥验证
```javascript
const validationRules = {
  anthropic: {
    apiKey: /^sk-ant-/,
    model: ['claude-3-opus-20240229', 'claude-3-sonnet-20240229', 'claude-3-haiku-20240307'],
    maxTokens: { min: 1, max: 8192 },
    temperature: { min: 0, max: 1 }
  },
  openai: {
    apiKey: /^sk-/,
    model: ['gpt-4', 'gpt-3.5-turbo', 'code-davinci-002'],
    maxTokens: { min: 1, max: 4096 },
    temperature: { min: 0, max: 2 }
  }
};
```

## 7. 多设备同步

### 7.1 同步机制

#### 加密同步流程
```
Device A (配置变更)
    ↓ (本地加密)
Encrypted Data
    ↓ (HTTPS 传输)
Cloud Storage
    ↓ (推送通知)
Device B (接收通知)
    ↓ (下载并解密)
Configuration Updated
```

#### 冲突解决策略
1. **时间戳优先**：最新的配置覆盖旧的
2. **用户选择**：提供界面让用户手动选择
3. **智能合并**：自动合并非冲突的配置项
4. **版本保留**：保留冲突的两个版本

### 7.2 同步配置

#### 云服务配置
```json
{
  "sync": {
    "enabled": true,
    "provider": "cloud-storage",
    "settings": {
      "endpoint": "https://api.ccswitch.com",
      "encryption_key": "user-generated-key",
      "sync_interval": 300,
      "conflict_resolution": "manual"
    }
  }
}
```

#### 自定义同步服务器
```bash
# 设置自定义同步服务器
cc-switch sync config --endpoint https://your-sync-server.com

# 设置加密密钥
cc-switch sync config --encryption-key your-encryption-key

# 启用同步
cc-switch sync enable
```

### 7.3 离线支持

#### 离线模式
```bash
# 启用离线模式
cc-switch offline enable

# 查看待同步项目
cc-switch offline queue

# 手动触发同步
cc-switch sync now
```

#### 离线配置缓存
- **本地缓存**：配置变更时本地缓存
- **队列管理**：离线时的变更加入同步队列
- **合并策略**：联网后智能合并离线变更

## 8. 故障排除

### 常见问题

#### 1. 应用无法启动
```bash
# 检查系统要求
cc-switch --check-system

# 重置配置
cc-switch reset --hard

# 重新安装
npm uninstall -g @ccswitch/cli
npm install -g @ccswitch/cli
```

#### 2. 配置切换失败
```bash
# 检查配置有效性
cc-switch validate --name config-name

# 查看详细错误信息
cc-switch switch --name config-name --verbose

# 重置环境变量
cc-switch env reset
```

#### 3. 同步问题
```bash
# 检查网络连接
cc-switch sync test-connection

# 强制同步
cc-switch sync --force

# 重新认证
cc-switch auth relogin
```

#### 4. 配置丢失
```bash
# 查看备份历史
cc-switch backup list

# 恢复配置
cc-switch backup restore --timestamp 2025-12-22T10:00:00Z

# 从云端恢复
cc-switch sync restore
```

### 调试模式

#### 启用调试日志
```bash
# 设置日志级别
export CCSWITCH_LOG_LEVEL=debug

# 启动调试模式
cc-switch --debug

# 查看日志文件
tail -f ~/.ccswitch/logs/app.log
```

#### 诊断工具
```bash
# 运行完整诊断
cc-switch doctor

# 检查特定功能
cc-switch doctor --check sync
cc-switch doctor --check encryption
cc-switch doctor --check api-connections
```

### 性能优化

#### 配置文件优化
```bash
# 清理无效配置
cc-switch cleanup --invalid

# 压缩配置文件
cc-switch optimize --compress

# 清理缓存
cc-switch cache clear
```

#### 网络优化
```bash
# 设置同步代理
cc-switch sync config --proxy http://proxy.company.com:8080

# 调整同步间隔
cc-switch sync config --interval 600

# 启用增量同步
cc-switch sync config --incremental true
```

## 更新日志

### v3.8.0 (最新)
- 🎉 重大架构升级，重构数据持久化层
- 🚀 全新用户界面，提升用户体验
- ✨ 新增配置模板功能
- 🔧 优化原子操作和事务回滚机制

### v3.7.0
- 🚀 新增6大核心功能，新增18000行代码
- 🔄 实现前后端分离架构
- 💾 原子写入和事务回滚功能
- 📊 配置变更历史和审计日志

### v3.6.0
- 🌙 深色主题支持
- 📱 响应式界面设计
- 🔍 全局搜索功能
- 🚨 配置冲突智能检测

### v3.5.0
- ☁️ 云端同步功能
- 🔒 增强的加密机制
- 📈 性能监控面板
- 🧪 配置沙箱环境

## 贡献指南

欢迎为 CC-Switch 项目贡献代码！

### 开发环境搭建
```bash
# 克隆仓库
git clone https://github.com/farion1231/cc-switch.git
cd cc-switch

# 安装依赖
npm install

# 启动开发环境
npm run dev

# 运行测试
npm test

# 构建应用
npm run build
```

### 代码规范
- 使用 ESLint 和 Prettier 进行代码格式化
- 遵循 Conventional Commits 规范
- 编写单元测试和集成测试
- 更新相关文档

### 提交流程
1. Fork 项目仓库
2. 创建功能分支
3. 编写代码和测试
4. 提交 Pull Request
5. 代码审查和合并

## 许可证

本项目采用 MIT 许可证。详情请参阅 [LICENSE](https://github.com/farion1231/cc-switch/blob/main/LICENSE) 文件。

## 相关资源

- [GitHub 仓库](https://github.com/farion1231/cc-switch)
- [官方文档](https://cc-switch.docs.com/)
- [用户社区](https://github.com/farion1231/cc-switch/discussions)
- [视频教程](https://www.bilibili.com/read/cv44051635/)
- [中文教程](https://zhuanlan.zhihu.com/p/1972328772964446521)

## 致谢

感谢所有为 CC-Switch 项目做出贡献的开发者和用户！特别感谢早期用户提供的宝贵反馈，以及开源社区的支持。

---

> 💡 **提示**: CC-Switch 是一个开源项目，如果你觉得有用，请考虑给项目一个 Star，或者参与贡献代码！让 AI 编程助手的配置管理变得更加简单高效！