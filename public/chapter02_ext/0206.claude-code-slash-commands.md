# Claude Code 斜线命令详解

> 全面掌握Claude Code斜线命令，包含内置命令、自定义命令创建、MCP命令和命令命名空间管理

## 目录导航

1. [内置斜线命令](#1-内置斜线命令)
2. [自定义斜线命令](#2-自定义斜线命令)
3. [MCP斜线命令](#3-mcp斜线命令)
4. [命令命名空间管理](#4-命令命名空间管理)
5. [高级使用技巧](#5-高级使用技巧)

## 1. 内置斜线命令

### 1.1 基础管理命令

| 命令 | 功能描述 | 使用示例 |
|------|----------|----------|
| `/help` | 获取使用帮助 | `/help` |
| `/clear` | 清除对话历史记录 | `/clear` |
| `/exit` | 退出Claude Code | `/exit` |
| `/cost` | 显示Token使用统计 | `/cost` |
| `/doctor` | 检查系统健康状态 | `/doctor` |

#### 实用示例

```bash
# 查看帮助信息
/help

# 检查系统状态
/doctor

# 查看Token使用情况
/cost

# 清理当前会话
/clear
```

### 1.2 项目管理命令

| 命令 | 功能描述 | 使用示例 |
|------|----------|----------|
| `/memory` | 编辑CLAUDE.md项目记忆文件 | `/memory` |
| `/config` | 查看/修改配置 | `/config` |
| `/init` | 初始化项目文档 | `/init` |
| `/permissions` | 查看或更新权限设置 | `/permissions` |

#### 实用示例

```bash
# 初始化项目
/init

# 编辑项目记忆
/memory

# 查看当前配置
/config

# 检查权限设置
/permissions
```

### 1.3 会话优化命令

| 命令 | 功能描述 | 使用示例 |
|------|----------|----------|
| `/compact [instructions]` | 压缩对话历史，可选焦点指示 | `/compact 专注于性能优化` |
| `/resume` | 查看历史聊天记录 | `/resume` |
| `/model` | 选择或更改AI模型 | `/model` |
| `/bug` | 报告错误（发送给Anthropic） | `/bug` |

#### 实用示例

```bash
# 压缩会话内容
/compact

# 带焦点的压缩
/compact 专注于登录功能的实现

# 切换模型
/model

# 恢复历史会话
/resume
```

### 1.4 集成和扩展命令

| 命令 | 功能描述 | 使用示例 |
|------|----------|----------|
| `/mcp` | 管理MCP服务器连接和OAuth身份验证 | `/mcp` |
| `/login` | 切换Anthropic账户 | `/login` |
| `/logout` | 退出当前Anthropic账户 | `/logout` |
| `/status` | 查看账户和系统状态 | `/status` |

#### 实用示例

```bash
# 查看账户状态
/status

# 管理MCP服务器
/mcp

# 重新登录
/login

# 查看系统状态
/status
```

### 1.5 代码相关命令

| 命令 | 功能描述 | 使用示例 |
|------|----------|----------|
| `/review` | 请求代码审查 | `/review` |
| `/pr_comments` | 查看拉取请求评论 | `/pr_comments` |
| `/terminal-setup` | 安装快捷键绑定 | `/terminal-setup` |
| `/vim` | 切换Vim模式 | `/vim` |

#### 实用示例

```bash
# 代码审查
/review

# 查看PR评论
/pr_comments

# 设置终端
/terminal-setup

# 切换Vim模式
/vim
```

## 2. 自定义斜线命令

### 2.1 命令语法和结构

#### 基本语法

```bash
/<prefix>:<command-name> [arguments]

# 参数说明
<prefix>       # 命令范围（project 或 user）
<command-name> # 从Markdown文件名派生（不含.md扩展名）
[arguments]    # 传递给命令的可选参数
```

#### 命令类型

1. **项目命令** - 存储在项目中，与团队共享
2. **个人命令** - 个人使用，所有项目通用

### 2.2 创建项目命令

#### 创建项目命令目录

```bash
# 创建项目命令目录
mkdir -p .claude/commands

# 确保目录被Git跟踪
echo ".claude/commands/" >> .gitignore
```

#### 创建代码优化命令

```bash
# 创建优化命令
echo "分析代码性能问题并提供优化建议：
1. 检查算法复杂度
2. 识别性能瓶颈
3. 建议重构方案
4. 提供优化后的代码示例

重点关注：
- 时间复杂度
- 空间复杂度
- 异步操作
- 缓存策略" > .claude/commands/optimize.md
```

#### 使用项目命令

```bash
# 使用自定义命令
/project:optimize

# 带参数使用
/project:optimize src/components/UserList.tsx

# 在对话中使用
> 请使用 /project:optimize 分析这个组件的性能
```

### 2.3 创建个人命令

#### 创建个人命令目录

```bash
# 创建个人命令目录
mkdir -p ~/.claude/commands
```

#### 创建安全审查命令

```bash
# 创建安全审查命令
echo "进行代码安全审查：
1. 检查SQL注入漏洞
2. 验证输入验证
3. 检查XSS风险
4. 审查认证授权
5. 检查敏感信息泄露

输出格式：
- 风险等级（高/中/低）
- 漏洞描述
- 修复建议
- 安全代码示例" > ~/.claude/commands/security-review.md
```

#### 使用个人命令

```bash
# 使用个人命令
/user:security-review

# 应用于特定文件
/user:security-review @src/api/auth.js
```

### 2.4 参数化命令

#### 创建带参数的命令

```bash
# 创建修复Issue的命令
echo "修复Issue #$ARGUMENTS，遵循以下流程：
1. 分析Issue描述和要求
2. 定位相关代码文件
3. 实施修复方案
4. 编写测试用例
5. 验证修复效果
6. 更新文档

确保：
- 代码质量符合团队规范
- 包含适当的错误处理
- 添加必要的测试覆盖
- 更新相关文档" > .claude/commands/fix-issue.md
```

#### 使用参数化命令

```bash
# 修复特定Issue
/project:fix-issue 123

# 修复多个Issue
/project:fix-issue 123 456 789
```

### 2.5 命令模板和最佳实践

#### 代码审查模板

```markdown
<!-- .claude/commands/review-pr.md -->
# Pull Request 代码审查

## 审查要点
- [ ] 代码符合团队规范
- [ ] 包含适当的测试
- [ ] 文档已更新
- [ ] 性能影响评估
- [ ] 安全性检查

## 审查重点
1. **功能性**：代码是否实现了预期功能
2. **可读性**：代码是否清晰易懂
3. **可维护性**：是否易于后续维护
4. **测试覆盖**：是否有充分的测试
5. **文档完整性**：文档是否准确

请审查当前PR：$ARGUMENTS
```

#### 部署检查清单

```markdown
<!-- .claude/commands/deploy-checklist.md -->
# 部署前检查清单

## 环境检查
- [ ] 环境变量配置正确
- [ ] 依赖版本兼容性
- [ ] 数据库迁移脚本
- [ ] 配置文件更新

## 代码检查
- [ ] 所有测试通过
- [ ] 代码覆盖率达标
- [ ] 性能测试通过
- [ ] 安全扫描通过

## 文档检查
- [ ] API文档更新
- [ ] 变更日志更新
- [ ] 部署说明完整

## 回滚计划
- [ ] 回滚脚本准备
- [ ] 数据备份确认
- [ ] 回滚测试验证

开始部署检查：$ARGUMENTS
```

## 3. MCP斜线命令

### 3.1 MCP命令格式

```bash
# MCP命令格式
/mcp__<server-name>__<prompt-name> [arguments]

# 示例
/mcp__github__list_prs
/mcp__jira__create_issue "Bug title" high
/mcp__database__query "SELECT * FROM users"
```

### 3.2 常用MCP命令

#### GitHub集成

```bash
# 列出Pull Request
/mcp__github__list_prs

# 创建PR
/mcp__github__create_pr "feature-branch" "main" "Add new feature"

# 审查PR
/mcp__github__pr_review 123

# 添加评论
/mcp__github__add_comment 123 "Looks good to me"
```

#### Jira集成

```bash
# 创建Issue
/mcp__jira__create_issue "Bug summary" "Bug description" high

# 查询Issue
/mcp__jira__get_issue PROJ-123

# 更新Issue状态
/mcp__jira__update_status PROJ-123 "In Progress"
```

#### 数据库操作

```bash
# 执行查询
/mcp__database__query "SELECT * FROM users WHERE active = true"

# 创建表
/mcp__database__create_table "CREATE TABLE logs (id INT, message TEXT)"

# 分析表结构
/mcp__database__describe_table users
```

### 3.3 管理MCP连接

#### 查看MCP状态

```bash
# 查看所有MCP服务器
/mcp

# 查看特定服务器状态
/mcp github

# 查看可用工具
/mcp github tools
```

#### 配置MCP认证

```bash
# OAuth认证
/mcp github auth

# 设置API Token
/mcp jira config token "your-jira-token"

# 配置数据库连接
/mcp database config connection "postgresql://..."
```

## 4. 命令命名空间管理

### 4.1 创建命名空间

#### 目录结构

```
.claude/commands/
├── frontend/
│   ├── component.md
│   ├── page.md
│   └── style.md
├── backend/
│   ├── api.md
│   ├── model.md
│   └── service.md
├── devops/
│   ├── deploy.md
│   ├── test.md
│   └── monitor.md
└── utils/
    ├── format.md
    └── validate.md
```

#### 创建命名空间命令

```bash
# 创建前端组件命令
echo "创建React组件模板：
1. 组件结构设计
2. Props类型定义
3. 样式文件创建
4. 测试文件生成
5. Storybook故事

组件类型：$ARGUMENTS" > .claude/commands/frontend/component.md

# 创建API命令
echo "设计RESTful API端点：
1. HTTP方法选择
2. 路由设计
3. 请求/响应格式
4. 错误处理
5. API文档生成

功能描述：$ARGUMENTS" > .claude/commands/backend/api.md
```

### 4.2 使用命名空间命令

#### 基本用法

```bash
# 使用命名空间命令
/project:frontend:component UserProfile
/project:backend:api "用户管理API"
/project:devops:deploy staging

# 查看可用命令
/project:  # 列出所有项目命令
/project:frontend:  # 列出前端命令
```

#### 嵌套命名空间

```bash
# 创建深层嵌套
mkdir -p .claude/commands/frontend/react/hooks
mkdir -p .claude/commands/frontend/react/utils

# 创建hook命令
echo "创建自定义React Hook：
1. Hook名称和参数设计
2. 逻辑实现
3. TypeScript类型
4. 使用示例
5. 测试用例

Hook功能：$ARGUMENTS" > .claude/commands/frontend/react/hooks/useCustom.md

# 使用深层命名空间
/project:frontend:react:hooks:useCustom 用户认证
```

### 4.3 命令继承和覆盖

#### 个人命令覆盖项目命令

```bash
# 项目命令
.claude/commands/review.md

# 个人命令（优先级更高）
~/.claude/commands/review.md

# 使用时会优先使用个人命令
/user:review  # 使用个人命令
/project:review  # 使用项目命令
```

#### 命令组合

```bash
# 创建组合命令
echo "执行完整的代码审查流程：
1. 运行 /user:security-review
2. 运行 /project:performance-review
3. 运行 /project:test-coverage-review
4. 生成综合报告

审查目标：$ARGUMENTS" > ~/.claude/commands/full-review.md

# 使用组合命令
/user:full-review @src/components/
```

## 5. 高级使用技巧

### 5.1 动态命令生成

#### 基于项目配置的命令

```bash
# 创建动态生成脚本
cat > .claude/commands/generate-docs.md << 'EOF'
#!/bin/bash
# 根据项目类型生成文档

# 检测项目类型
if [ -f "package.json" ]; then
    echo "检测到Node.js项目"
    # 生成API文档
    claude -p "生成API文档" > docs/api.md
    # 生成组件文档
    claude -p "生成组件文档" > docs/components.md
elif [ -f "requirements.txt" ]; then
    echo "检测到Python项目"
    # 生成Python文档
    claude -p "生成Python项目文档" > docs/python-docs.md
fi

echo "文档生成完成：$ARGUMENTS"
EOF
```

### 5.2 命令链和管道

#### 命令组合使用

```bash
# 在对话中链式使用命令
> 首先使用 /project:analyze 代码结构
> 然后使用 /user:review 进行代码审查
> 最后使用 /project:generate-docs 生成文档

# 一行执行多个命令
/project:setup && /project:install-deps && /project:test
```

#### 条件命令执行

```bash
# 创建条件命令
echo "条件执行任务：
if [ \"$ARGUMENTS\" = \"production\" ]; then
    echo "生产环境部署"
    # 执行生产部署流程
else
    echo "开发环境设置"
    # 执行开发环境设置
fi" > .claude/commands/deploy.md
```

### 5.3 命令模板系统

#### 创建模板生成器

```bash
# 模板生成命令
echo "生成项目模板：
可用模板：
1. react-app - React应用
2. node-api - Node.js API
3. python-lib - Python库
4. go-service - Go服务

模板类型：$ARGUMENTS

根据选择的模板创建：
- 目录结构
- 配置文件
- 示例代码
- 文档文件
- CI/CD配置" > ~/.claude/commands/template.md
```

### 5.4 命令版本管理

#### 版本化命令

```bash
# 创建版本目录
mkdir -p .claude/commands/v1 .claude/commands/v2

# 不同版本的命令
echo "v1版本的API设计命令" > .claude/commands/v1/api-design.md
echo "v2版本的API设计命令" > .claude/commands/v2/api-design.md

# 使用特定版本
/project:v1:api-design
/project:v2:api-design
```

### 5.5 命令调试和测试

#### 命令测试框架

```bash
# 创建测试命令
echo "测试自定义命令：
1. 验证命令文件存在
2. 检查命令语法
3. 测试命令执行
4. 验证输出结果

测试命令：$ARGUMENTS" > .claude/commands/test-command.md

# 批量测试
for cmd in .claude/commands/*.md; do
    claude -p "测试命令: $cmd"
done
```

## 最佳实践

### 1. 命令设计原则

- **简洁明了**：命令名称简短且具有描述性
- **参数化**：使用参数增加命令灵活性
- **文档完整**：每个命令都有清晰的使用说明
- **错误处理**：包含适当的错误处理和提示

### 2. 组织策略

- **分类管理**：使用命名空间组织相关命令
- **版本控制**：重要命令进行版本管理
- **共享机制**：项目命令团队共享，个人命令全局使用

### 3. 维护建议

- **定期更新**：根据项目需求更新命令
- **性能优化**：避免命令过于复杂影响性能
- **备份重要**：重要命令进行备份

## 下一步

掌握斜线命令后，建议继续学习：

- [Claude Code全局配置与设置](./0112.claude-code-global-settings.md)
- [Claude Code高级自动化技巧](./0113.claude-code-automation.md)

## 参考资源

- [斜线命令官方文档](https://docs.claude.com/en/docs/claude-code/slash-commands)
- [MCP协议规范](https://modelcontextprotocol.io/)
- [自定义命令示例](https://github.com/anthropics/claude-code-examples)

> 💡 **提示**: 使用 `/help` 可以快速查看所有可用的斜线命令。自定义命令的Markdown文件支持完整的Markdown语法，可以包含代码块、列表、表格等丰富格式。