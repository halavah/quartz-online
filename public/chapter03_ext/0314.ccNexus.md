# CCNexus - æ™ºèƒ½APIç½‘å…³

> ä¸“ä¸ºClaude Codeå’ŒCodex CLIè®¾è®¡çš„æ™ºèƒ½APIç½‘å…³ï¼Œæ”¯æŒå¤šå¹³å°é›†æˆã€ç«¯ç‚¹è½®æ¢ã€ä½¿ç”¨ç›‘æ§å’Œè´Ÿè½½å‡è¡¡ï¼Œæä¾›å¯é æ€§å’Œæ€§èƒ½å¢å¼º

## ç›®å½•å¯¼èˆª

1. [ä»€ä¹ˆæ˜¯ CCNexusï¼Ÿ](#1-ä»€ä¹ˆæ˜¯-ccnexus)
2. [æ ¸å¿ƒåŠŸèƒ½ç‰¹æ€§](#2-æ ¸å¿ƒåŠŸèƒ½ç‰¹æ€§)
3. [ç³»ç»Ÿæ¶æ„](#3-ç³»ç»Ÿæ¶æ„)
4. [å®‰è£…æŒ‡å—](#4-å®‰è£…æŒ‡å—)
5. [é…ç½®è¯´æ˜](#5-é…ç½®è¯´æ˜)
6. [ä½¿ç”¨æ–¹æ³•](#6-ä½¿ç”¨æ–¹æ³•)
7. [ç›‘æ§åˆ†æ](#7-ç›‘æ§åˆ†æ)
8. [æ•…éšœæ’é™¤](#8-æ•…éšœæ’é™¤)

## 1. ä»€ä¹ˆæ˜¯ CCNexusï¼Ÿ

CCNexus æ˜¯ç”± GitHub å¼€å‘è€… lich0821 åˆ›å»ºçš„å¼€æºæ™ºèƒ½ API ç½‘å…³ï¼Œä¸“é—¨ä¸º Claude Code å’Œ Codex CLI è®¾è®¡ã€‚å®ƒæä¾›äº†ä¸€ä¸ªç»Ÿä¸€çš„æ¥å£æ¥ç®¡ç†å’Œè·¯ç”± AI API è¯·æ±‚ï¼Œæ”¯æŒå¤šä¸ªæä¾›å•†ã€ç«¯ç‚¹è½®æ¢ã€ä½¿ç”¨ç›‘æ§å’Œè´Ÿè½½å‡è¡¡ç­‰åŠŸèƒ½ï¼Œæ˜¾è‘—æå‡äº† AI ç¼–ç¨‹åŠ©æ‰‹çš„å¯é æ€§å’Œæ€§èƒ½ã€‚

### æ ¸å¿ƒä»·å€¼

- **å¤šå¹³å°æ”¯æŒ**ï¼šç»Ÿä¸€ç®¡ç† OpenAIã€Geminiã€Anthropic ç­‰å¤šä¸ª AI å¹³å°
- **ç«¯ç‚¹è½®æ¢**ï¼šè‡ªåŠ¨è½®æ¢ API ç«¯ç‚¹ï¼Œé¿å…å•ç‚¹æ•…éšœ
- **è´Ÿè½½å‡è¡¡**ï¼šæ™ºèƒ½åˆ†é…è¯·æ±‚åˆ°ä¸åŒæä¾›å•†å’Œè´¦æˆ·
- **ä½¿ç”¨ç›‘æ§**ï¼šå®æ—¶ç›‘æ§ API ä½¿ç”¨æƒ…å†µå’Œæˆæœ¬
- **æ™ºèƒ½é‡è¯•**ï¼šå¢å¼ºå¯é æ€§å’Œå®¹é”™èƒ½åŠ›
- **æ€§èƒ½ä¼˜åŒ–**ï¼šæé«˜å“åº”é€Ÿåº¦å’Œç”¨æˆ·ä½“éªŒ

### è®¾è®¡ç†å¿µ

CCNexus éµå¾ªç°ä»£å¾®æœåŠ¡å’Œ API ç½‘å…³çš„è®¾è®¡åŸåˆ™ï¼š
- **é«˜å¯ç”¨æ€§**ï¼šç¡®ä¿æœåŠ¡è¿ç»­æ€§å’Œç¨³å®šæ€§
- **å¯æ‰©å±•æ€§**ï¼šæ”¯æŒæ°´å¹³æ‰©å±•å’ŒåŠ¨æ€é…ç½®
- **å®‰å…¨æ€§**ï¼šä¿æŠ¤ API å¯†é’¥å’Œç”¨æˆ·æ•°æ®
- **é€æ˜æ€§**ï¼šå¯¹ç”¨æˆ·é€æ˜çš„è¯·æ±‚è·¯ç”±å’Œæ•…éšœå¤„ç†
- **å¯è§‚æµ‹æ€§**ï¼šå®Œæ•´çš„ç›‘æ§å’Œæ—¥å¿—è®°å½•

## 2. æ ¸å¿ƒåŠŸèƒ½ç‰¹æ€§

### ğŸ”„ å¤šæä¾›å•†æ”¯æŒ
- **OpenAI é›†æˆ**ï¼šå®Œæ•´çš„ OpenAI API æ”¯æŒ
- **Anthropic é›†æˆ**ï¼šClaude API çš„å®Œæ•´æ”¯æŒ
- **Gemini é›†æˆ**ï¼šGoogle Gemini API æ”¯æŒ
- **è‡ªå®šä¹‰æä¾›å•†**ï¼šæ”¯æŒè‡ªå®šä¹‰ API ç«¯ç‚¹
- **æ··åˆä½¿ç”¨**ï¼šåŒæ—¶ä½¿ç”¨å¤šä¸ªæä¾›å•†çš„æœåŠ¡

### âš–ï¸ è´Ÿè½½å‡è¡¡
- **è¯·æ±‚åˆ†å‘**ï¼šæ™ºèƒ½åˆ†å‘è¯·æ±‚åˆ°ä¸åŒç«¯ç‚¹
- **åŠ æƒåˆ†é…**ï¼šåŸºäºæ€§èƒ½å’Œæˆæœ¬çš„æƒé‡åˆ†é…
- **å¥åº·æ£€æŸ¥**ï¼šå®æ—¶ç›‘æ§ç«¯ç‚¹å¥åº·çŠ¶æ€
- **åŠ¨æ€è°ƒæ•´**ï¼šæ ¹æ®æ€§èƒ½åŠ¨æ€è°ƒæ•´åˆ†é…ç­–ç•¥
- **æ•…éšœè½¬ç§»**ï¼šè‡ªåŠ¨åˆ‡æ¢åˆ°å¥åº·çš„ç«¯ç‚¹

### ğŸ“Š ä½¿ç”¨ç›‘æ§
- **å®æ—¶ç»Ÿè®¡**ï¼šå®æ—¶æ˜¾ç¤ºè¯·æ±‚ç»Ÿè®¡å’Œæ€§èƒ½æŒ‡æ ‡
- **æˆæœ¬åˆ†æ**ï¼šè¯¦ç»†çš„ API ä½¿ç”¨æˆæœ¬åˆ†æ
- **æ€§èƒ½ç›‘æ§**ï¼šå“åº”æ—¶é—´ã€æˆåŠŸç‡ç­‰æ€§èƒ½æŒ‡æ ‡
- **å‘Šè­¦é€šçŸ¥**ï¼šå¼‚å¸¸æƒ…å†µçš„å‘Šè­¦å’Œé€šçŸ¥
- **æŠ¥å‘Šç”Ÿæˆ**ï¼šå®šæœŸçš„ä½¿ç”¨æŠ¥å‘Šå’Œåˆ†æ

### ğŸ›¡ï¸ å®‰å…¨åŠŸèƒ½
- **API å¯†é’¥ç®¡ç†**ï¼šå®‰å…¨çš„ API å¯†é’¥å­˜å‚¨å’Œç®¡ç†
- **è®¿é—®æ§åˆ¶**ï¼šåŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶
- **è¯·æ±‚é™åˆ¶**ï¼šé˜²æ­¢æ»¥ç”¨çš„è¯·æ±‚é™åˆ¶
- **æ•°æ®åŠ å¯†**ï¼šæ•æ„Ÿæ•°æ®çš„åŠ å¯†ä¼ è¾“å’Œå­˜å‚¨
- **å®¡è®¡æ—¥å¿—**ï¼šå®Œæ•´çš„æ“ä½œå®¡è®¡æ—¥å¿—

### ğŸ”§ é«˜çº§ç‰¹æ€§
- **æ™ºèƒ½ç¼“å­˜**ï¼šæ™ºèƒ½ç¼“å­˜æœºåˆ¶æé«˜å“åº”é€Ÿåº¦
- **è¯·æ±‚è½¬æ¢**ï¼šAPI è¯·æ±‚æ ¼å¼çš„è‡ªåŠ¨è½¬æ¢
- **åè®®é€‚é…**ï¼šæ”¯æŒå¤šç§ API åè®®å’Œæ ¼å¼
- **æ’ä»¶ç³»ç»Ÿ**ï¼šå¯æ‰©å±•çš„æ’ä»¶æ¶æ„
- **é…ç½®ç®¡ç†**ï¼šçµæ´»çš„é…ç½®ç®¡ç†å’Œçƒ­é‡è½½

### ğŸš€ æ€§èƒ½ä¼˜åŒ–
- **è¿æ¥æ± **ï¼šHTTP è¿æ¥æ± ä¼˜åŒ–
- **å¼‚æ­¥å¤„ç†**ï¼šå¼‚æ­¥è¯·æ±‚å¤„ç†æé«˜å¹¶å‘èƒ½åŠ›
- **å‹ç¼©ä¼ è¾“**ï¼šæ•°æ®å‹ç¼©å‡å°‘ä¼ è¾“æ—¶é—´
- **CDN é›†æˆ**ï¼šCDN é›†æˆæé«˜å…¨çƒè®¿é—®é€Ÿåº¦
- **ç¼“å­˜ç­–ç•¥**ï¼šå¤šçº§ç¼“å­˜ç­–ç•¥

## 3. ç³»ç»Ÿæ¶æ„

### æŠ€æœ¯æ¶æ„
```
Client Applications
    â†“
CCNexus Gateway
    â”œâ”€â”€ Request Router
    â”œâ”€â”€ Load Balancer
    â”œâ”€â”€ Health Monitor
    â”œâ”€â”€ Rate Limiter
    â””â”€â”€ Analytics Engine
    â†“
Multiple API Providers
    â”œâ”€â”€ OpenAI API
    â”œâ”€â”€ Anthropic API
    â”œâ”€â”€ Gemini API
    â””â”€â”€ Custom APIs
```

### æ ¸å¿ƒç»„ä»¶

#### Request Routerï¼ˆè¯·æ±‚è·¯ç”±å™¨ï¼‰
- **è¯·æ±‚è§£æ**ï¼šè§£æå’ŒéªŒè¯ API è¯·æ±‚
- **è·¯ç”±å†³ç­–**ï¼šæ ¹æ®é…ç½®å†³å®šè¯·æ±‚è·¯ç”±
- **åè®®è½¬æ¢**ï¼šåœ¨ä¸åŒ API åè®®é—´è½¬æ¢
- **å“åº”å¤„ç†**ï¼šå¤„ç†å’Œæ ¼å¼åŒ– API å“åº”

#### Load Balancerï¼ˆè´Ÿè½½å‡è¡¡å™¨ï¼‰
- **åˆ†é…ç®—æ³•**ï¼šå®ç°å¤šç§è´Ÿè½½å‡è¡¡ç®—æ³•
- **æƒé‡ç®¡ç†**ï¼šåŠ¨æ€è°ƒæ•´ç«¯ç‚¹æƒé‡
- **å¥åº·æ£€æŸ¥**ï¼šå®šæœŸæ£€æŸ¥ç«¯ç‚¹å¥åº·çŠ¶æ€
- **æ•…éšœæ£€æµ‹**ï¼šæ£€æµ‹å’Œå¤„ç†ç«¯ç‚¹æ•…éšœ

#### Health Monitorï¼ˆå¥åº·ç›‘æ§å™¨ï¼‰
- **çŠ¶æ€ç›‘æ§**ï¼šå®æ—¶ç›‘æ§ç«¯ç‚¹çŠ¶æ€
- **æ€§èƒ½ç›‘æ§**ï¼šç›‘æ§ç«¯ç‚¹æ€§èƒ½æŒ‡æ ‡
- **å‘Šè­¦ç³»ç»Ÿ**ï¼šå¼‚å¸¸æƒ…å†µçš„å‘Šè­¦é€šçŸ¥
- **ç»Ÿè®¡æ”¶é›†**ï¼šæ”¶é›†å’Œåˆ†æç»Ÿè®¡æ•°æ®

#### Rate Limiterï¼ˆè¯·æ±‚é™åˆ¶å™¨ï¼‰
- **è¯·æ±‚é™åˆ¶**ï¼šåŸºäºç”¨æˆ·å’Œç«¯ç‚¹çš„è¯·æ±‚é™åˆ¶
- **é…é¢ç®¡ç†**ï¼šAPI ä½¿ç”¨é…é¢çš„ç®¡ç†
- **ä¼˜å…ˆçº§å¤„ç†**ï¼šåŸºäºä¼˜å…ˆçº§çš„è¯·æ±‚å¤„ç†
- **æµé‡æ§åˆ¶**ï¼šç²¾ç¡®çš„æµé‡æ§åˆ¶æœºåˆ¶

## 4. å®‰è£…æŒ‡å—

### 4.1 ç³»ç»Ÿè¦æ±‚

#### æœ€ä½è¦æ±‚
- **æ“ä½œç³»ç»Ÿ**ï¼šLinux (Ubuntu 18.04+), macOS 10.15+, Windows 10+
- **å¤„ç†å™¨**ï¼š2æ ¸å¿ƒ CPU
- **å†…å­˜**ï¼š4GB RAM
- **å­˜å‚¨ç©ºé—´**ï¼š1GB å¯ç”¨ç©ºé—´
- **ç½‘ç»œ**ï¼šç¨³å®šçš„äº’è”ç½‘è¿æ¥

#### æ¨èé…ç½®
- **æ“ä½œç³»ç»Ÿ**ï¼šLinux (Ubuntu 20.04+), macOS 12+, Windows 11+
- **å¤„ç†å™¨**ï¼š4æ ¸å¿ƒæˆ–æ›´å¤š CPU
- **å†…å­˜**ï¼š8GB RAM æˆ–æ›´å¤š
- **å­˜å‚¨ç©ºé—´**ï¼š5GB å¯ç”¨ç©ºé—´
- **ç½‘ç»œ**ï¼šé«˜é€Ÿå®½å¸¦è¿æ¥

#### ä¾èµ–æœåŠ¡
- **Go**ï¼š1.19+ï¼ˆå¦‚æœä»æºç ç¼–è¯‘ï¼‰
- **Docker**ï¼š20.10+ï¼ˆå¯é€‰ï¼Œç”¨äºå®¹å™¨åŒ–éƒ¨ç½²ï¼‰
- **Redis**ï¼š6.0+ï¼ˆå¯é€‰ï¼Œç”¨äºç¼“å­˜å’Œä¼šè¯å­˜å‚¨ï¼‰

### 4.2 å®‰è£…æ–¹å¼

#### æ–¹å¼1ï¼šé¢„ç¼–è¯‘äºŒè¿›åˆ¶æ–‡ä»¶
```bash
# Linux/macOS ä¸‹è½½
wget https://github.com/lich0821/ccNexus/releases/latest/download/ccnexus-linux-amd64.tar.gz
tar -xzf ccnexus-linux-amd64.tar.gz

# Windows ä¸‹è½½
# ä¸‹è½½ ccnexus-windows-amd64.zip å¹¶è§£å‹

# ç§»åŠ¨åˆ°ç³»ç»Ÿè·¯å¾„
sudo mv ccnexus /usr/local/bin/

# éªŒè¯å®‰è£…
ccnexus --version
```

#### æ–¹å¼2ï¼šæºç ç¼–è¯‘
```bash
# å…‹éš†ä»“åº“
git clone https://github.com/lich0821/ccNexus.git
cd ccNexus

# ç¼–è¯‘
go build -o ccnexus cmd/ccnexus/main.go

# å®‰è£…åˆ°ç³»ç»Ÿè·¯å¾„
sudo mv ccnexus /usr/local/bin/

# éªŒè¯å®‰è£…
ccnexus --version
```

#### æ–¹å¼3ï¼šDocker éƒ¨ç½²
```bash
# æ‹‰å–é•œåƒ
docker pull lich0821/ccnexus

# è¿è¡Œå®¹å™¨
docker run -d \
  --name ccnexus \
  -p 8080:8080 \
  -v $(pwd)/config:/app/config \
  lich0821/ccnexus

# éªŒè¯éƒ¨ç½²
curl http://localhost:8080/health
```

#### æ–¹å¼4ï¼šGo å®‰è£…
```bash
# å®‰è£…æœ€æ–°ç‰ˆæœ¬
go install github.com/lich0821/ccNexus@latest

# éªŒè¯å®‰è£…
ccnexus --version
```

### 4.3 åˆå§‹é…ç½®

#### åˆ›å»ºé…ç½®æ–‡ä»¶
```bash
# åˆå§‹åŒ–é…ç½®
ccnexus init

# è¿™ä¼šåœ¨å½“å‰ç›®å½•åˆ›å»º config.yaml æ–‡ä»¶
```

#### åŸºç¡€é…ç½®ç¤ºä¾‹
```yaml
# config.yaml
server:
  host: "0.0.0.0"
  port: 8080
  workers: 4

providers:
  openai:
    name: "OpenAI"
    base_url: "https://api.openai.com/v1"
    api_key: "${OPENAI_API_KEY}"
    models: ["gpt-4", "gpt-3.5-turbo"]
    timeout: 30000
    weight: 2

  anthropic:
    name: "Anthropic"
    base_url: "https://api.anthropic.com"
    api_key: "${ANTHROPIC_API_KEY}"
    models: ["claude-3-opus-20240229", "claude-3-sonnet-20240229"]
    timeout: 30000
    weight: 3

  gemini:
    name: "Google Gemini"
    base_url: "https://generativelanguage.googleapis.com/v1"
    api_key: "${GEMINI_API_KEY}"
    models: ["gemini-pro"]
    timeout: 30000
    weight: 1

routing:
  default_strategy: "weighted_round_robin"
  health_check_interval: 30
  max_retries: 3
  timeout: 60000

monitoring:
  enabled: true
  metrics_interval: 60
  log_level: "info"
  export_prometheus: true
```

### 4.4 Claude Code é›†æˆ

#### é…ç½® Claude Code
```bash
# è®¾ç½®ç¯å¢ƒå˜é‡
export ANTHROPIC_API_URL=http://localhost:8080/anthropic
export OPENAI_API_BASE=http://localhost:8080/openai
export GEMINI_API_BASE=http://localhost:8080/gemini
```

#### æˆ–ä½¿ç”¨é…ç½®æ–‡ä»¶
```json
// ~/.claude/settings.json
{
  "mcpServers": {
    "ccnexus": {
      "command": "ccnexus",
      "args": ["--mcp-server"],
      "env": {
        "CCNEXUS_CONFIG": "/path/to/config.yaml"
      }
    }
  }
}
```

## 5. é…ç½®è¯´æ˜

### 5.1 æä¾›å•†é…ç½®

#### OpenAI é…ç½®
```yaml
providers:
  openai:
    name: "OpenAI"
    base_url: "https://api.openai.com/v1"
    api_key: "sk-your-key"
    models:
      - name: "gpt-4"
        max_tokens: 8192
        cost_per_input: 0.03
        cost_per_output: 0.06
      - name: "gpt-3.5-turbo"
        max_tokens: 4096
        cost_per_input: 0.0015
        cost_per_output: 0.002

    rate_limit:
      requests_per_minute: 3500
      tokens_per_minute: 90000

    health_check:
      endpoint: "/models"
      interval: 30
      timeout: 10

    retry_policy:
      max_retries: 3
      backoff: "exponential"
      max_delay: 60000
```

#### è‡ªå®šä¹‰æä¾›å•†é…ç½®
```yaml
providers:
  custom_provider:
    name: "Custom LLM Provider"
    type: "openai_compatible"
    base_url: "https://your-provider.com/v1"
    api_key: "your-key"
    models:
      - name: "custom-model"
        max_tokens: 4096
        cost_per_input: 0.01
        cost_per_output: 0.02

    headers:
      "X-Custom-Header": "value"
      "Authorization": "Bearer your-token"

    ssl_verify: false
    timeout: 60000
```

### 5.2 è·¯ç”±ç­–ç•¥é…ç½®

#### è´Ÿè½½å‡è¡¡ç­–ç•¥
```yaml
routing:
  strategy: "weighted_round_robin"  # round_robin, weighted_round_robin, least_connections, random

  weights:
    openai: 2
    anthropic: 3
    gemini: 1

  health_check:
    enabled: true
    interval: 30
    timeout: 10
    failure_threshold: 3
    recovery_threshold: 2

  circuit_breaker:
    enabled: true
    failure_threshold: 5
    recovery_timeout: 60000
    half_open_max_calls: 3
```

#### è¯·æ±‚è·¯ç”±è§„åˆ™
```yaml
routing:
  rules:
    - name: "coding_tasks"
      condition: "task_type == 'coding'"
      providers: ["anthropic", "openai"]
      models: ["claude-3-opus-20240229", "gpt-4"]
      strategy: "weighted_round_robin"

    - name: "simple_tasks"
      condition: "task_complexity < 5"
      providers: ["openai", "gemini"]
      models: ["gpt-3.5-turbo", "gemini-pro"]
      strategy: "least_cost"

    - name: "high_priority"
      condition: "priority == 'high'"
      providers: ["anthropic"]
      models: ["claude-3-opus-20240229"]
      strategy: "fastest"
```

### 5.3 ç›‘æ§é…ç½®

#### æŒ‡æ ‡æ”¶é›†
```yaml
monitoring:
  enabled: true
  metrics:
    - name: "request_count"
      type: "counter"
      labels: ["provider", "model", "status"]
    - name: "response_time"
      type: "histogram"
      buckets: [10, 50, 100, 500, 1000, 5000]
    - name: "error_rate"
      type: "gauge"
      labels: ["provider", "error_type"]

  exporters:
    prometheus:
      enabled: true
      port: 9090
      path: "/metrics"

    jaeger:
      enabled: false
      endpoint: "http://localhost:14268/api/traces"

  alerts:
    - name: "high_error_rate"
      condition: "error_rate > 0.1"
      duration: "5m"
      action: "webhook"
      target: "https://hooks.slack.com/your-webhook"
```

#### æ—¥å¿—é…ç½®
```yaml
logging:
  level: "info"  # debug, info, warn, error
  format: "json"  # json, text
  output: "stdout"  # stdout, file

  file:
    enabled: true
    path: "./logs/ccnexus.log"
    max_size: "100MB"
    max_files: 10

  structured:
    request_id: true
    timestamp: true
    caller: true
    stacktrace: true
```

## 6. ä½¿ç”¨æ–¹æ³•

### 6.1 åŸºç¡€ä½¿ç”¨

#### å¯åŠ¨æœåŠ¡
```bash
# ä½¿ç”¨é»˜è®¤é…ç½®å¯åŠ¨
ccnexus

# ä½¿ç”¨æŒ‡å®šé…ç½®æ–‡ä»¶
ccnexus --config /path/to/config.yaml

# å¯åŠ¨è°ƒè¯•æ¨¡å¼
ccnexus --debug

# æŒ‡å®šç«¯å£å¯åŠ¨
ccnexus --port 9090
```

#### éªŒè¯æœåŠ¡çŠ¶æ€
```bash
# å¥åº·æ£€æŸ¥
curl http://localhost:8080/health

# æŸ¥çœ‹é…ç½®
curl http://localhost:8080/config

# æŸ¥çœ‹æä¾›å•†çŠ¶æ€
curl http://localhost:8080/providers/status

# æŸ¥çœ‹è·¯ç”±çŠ¶æ€
curl http://localhost:8080/routing/status
```

### 6.2 API ä½¿ç”¨

#### ä»£ç†è¯·æ±‚åˆ°ä¸åŒæä¾›å•†
```bash
# OpenAI è¯·æ±‚
curl -X POST http://localhost:8080/openai/v1/chat/completions \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer any-key" \
  -d '{
    "model": "gpt-4",
    "messages": [{"role": "user", "content": "Hello!"}]
  }'

# Anthropic è¯·æ±‚
curl -X POST http://localhost:8080/anthropic/v1/messages \
  -H "Content-Type: application/json" \
  -H "x-api-key: any-key" \
  -d '{
    "model": "claude-3-sonnet-20240229",
    "messages": [{"role": "user", "content": "Hello!"}]
  }'
```

#### ä½¿ç”¨ç‰¹å®šè·¯ç”±ç­–ç•¥
```bash
# æŒ‡å®šè·¯ç”±ç­–ç•¥
curl -X POST http://localhost:8080/v1/chat/completions \
  -H "Content-Type: application/json" \
  -H "X-CCNexus-Strategy: weighted_round_robin" \
  -H "X-CCNexus-Priority: high" \
  -d '{
    "model": "auto",
    "messages": [{"role": "user", "content": "Help me code"}]
  }'
```

### 6.3 é…ç½®ç®¡ç†

#### åŠ¨æ€é…ç½®æ›´æ–°
```bash
# çƒ­é‡è½½é…ç½®
curl -X POST http://localhost:8080/admin/reload-config

# æ·»åŠ æ–°æä¾›å•†
curl -X POST http://localhost:8080/admin/providers \
  -H "Content-Type: application/json" \
  -d '{
    "name": "new_provider",
    "base_url": "https://new-provider.com/v1",
    "api_key": "new-key"
  }'

# æ›´æ–°æƒé‡
curl -X PUT http://localhost:8080/admin/weights \
  -H "Content-Type: application/json" \
  -d '{
    "openai": 3,
    "anthropic": 2,
    "gemini": 1
  }'
```

### 6.4 ç›‘æ§å’Œç®¡ç†

#### æŸ¥çœ‹å®æ—¶æŒ‡æ ‡
```bash
# è·å– Prometheus æŒ‡æ ‡
curl http://localhost:8080/metrics

# è·å– JSON æ ¼å¼çš„ç»Ÿè®¡
curl http://localhost:8080/stats

# è·å–è¯¦ç»†çŠ¶æ€
curl http://localhost:8080/status
```

#### ç®¡ç†ä¼šè¯å’Œç¼“å­˜
```bash
# æŸ¥çœ‹æ´»è·ƒä¼šè¯
curl http://localhost:8080/sessions

# æ¸…ç†ç¼“å­˜
curl -X DELETE http://localhost:8080/cache

# é‡ç½®ç»Ÿè®¡
curl -X POST http://localhost:8080/admin/reset-stats
```

## 7. ç›‘æ§åˆ†æ

### 7.1 å®æ—¶ç›‘æ§

#### è¯·æ±‚ç»Ÿè®¡
```bash
# æŸ¥çœ‹è¯·æ±‚æ•°é‡
curl http://localhost:8080/stats/requests

# æŒ‰æä¾›å•†åˆ†ç»„
curl http://localhost:8080/stats/requests?group_by=provider

# æŒ‰æ—¶é—´èŒƒå›´æŸ¥è¯¢
curl http://localhost:8080/stats/requests?start=2025-12-01&end=2025-12-22
```

#### æ€§èƒ½æŒ‡æ ‡
```bash
# å“åº”æ—¶é—´ç»Ÿè®¡
curl http://localhost:8080/stats/response_time

# é”™è¯¯ç‡ç»Ÿè®¡
curl http://localhost:8080/stats/error_rate

# ååé‡ç»Ÿè®¡
curl http://localhost:8080/stats/throughput
```

### 7.2 æˆæœ¬åˆ†æ

#### API ä½¿ç”¨æˆæœ¬
```bash
# æ€»æˆæœ¬ç»Ÿè®¡
curl http://localhost:8080/stats/cost

# æŒ‰æä¾›å•†åˆ†ç»„
curl http://localhost:8080/stats/cost?group_by=provider

# æŒ‰æ¨¡å‹åˆ†ç»„
curl http://localhost:8080/stats/cost?group_by=model
```

#### æˆæœ¬ä¼˜åŒ–å»ºè®®
```bash
# è·å–æˆæœ¬ä¼˜åŒ–å»ºè®®
curl http://localhost:8080/recommendations/cost

# æŸ¥çœ‹é«˜æˆæœ¬ä½¿ç”¨æ¨¡å¼
curl http://localhost:8080/analysis/high_cost_patterns
```

### 7.3 æŠ¥å‘Šç”Ÿæˆ

#### ç”Ÿæˆä½¿ç”¨æŠ¥å‘Š
```bash
# ç”Ÿæˆæ—¥æŠ¥å‘Š
curl -X POST http://localhost:8080/reports/daily \
  -d '{"date": "2025-12-22", "format": "json"}'

# ç”Ÿæˆå‘¨æŠ¥å‘Š
curl -X POST http://localhost:8080/reports/weekly \
  -d '{"week": "2025-W51", "format": "html"}'

# ç”ŸæˆæœˆæŠ¥å‘Š
curl -X POST http://localhost:8080/reports/monthly \
  -d '{"month": "2025-12", "format": "pdf"}'
```

## 8. æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. æœåŠ¡å¯åŠ¨å¤±è´¥
```bash
# æ£€æŸ¥é…ç½®æ–‡ä»¶
ccnexus config validate

# æ£€æŸ¥ç«¯å£å ç”¨
lsof -i :8080

# æŸ¥çœ‹é”™è¯¯æ—¥å¿—
ccnexus logs --level error

# ä½¿ç”¨è°ƒè¯•æ¨¡å¼
ccnexus --debug
```

#### 2. æä¾›å•†è¿æ¥å¤±è´¥
```bash
# æµ‹è¯•æä¾›å•†è¿æ¥
ccnexus test --provider openai

# æ£€æŸ¥ API å¯†é’¥
ccnexus validate --api-keys

# æŸ¥çœ‹æä¾›å•†çŠ¶æ€
curl http://localhost:8080/providers/status
```

#### 3. è·¯ç”±ä¸å·¥ä½œ
```bash
# æ£€æŸ¥è·¯ç”±é…ç½®
ccnexus config validate --section routing

# æµ‹è¯•è·¯ç”±è§„åˆ™
curl -X POST http://localhost:8080/admin/test-routing \
  -d '{"request": {"model": "auto"}}'

# æŸ¥çœ‹è·¯ç”±æ—¥å¿—
ccnexus logs --filter routing
```

#### 4. æ€§èƒ½é—®é¢˜
```bash
# æ£€æŸ¥ç³»ç»Ÿèµ„æº
curl http://localhost:8080/system/resources

# åˆ†ææ€§èƒ½ç“¶é¢ˆ
curl http://localhost:8080/analysis/performance

# ä¼˜åŒ–é…ç½®
ccnexus optimize --config config.yaml
```

### è°ƒè¯•å·¥å…·

#### å¥åº·æ£€æŸ¥
```bash
# å…¨é¢å¥åº·æ£€æŸ¥
ccnexus health --full

# æ£€æŸ¥ç‰¹å®šç»„ä»¶
ccnexus health --component providers
ccnexus health --component routing
ccnexus health --component monitoring
```

#### é…ç½®éªŒè¯
```bash
# éªŒè¯å®Œæ•´é…ç½®
ccnexus config validate --all

# éªŒè¯ç‰¹å®šéƒ¨åˆ†
ccnexus config validate --section providers
ccnexus config validate --section routing
ccnexus config validate --section monitoring
```

#### æ—¥å¿—åˆ†æ
```bash
# å®æ—¶æ—¥å¿—æŸ¥çœ‹
ccnexus logs --follow

# è¿‡æ»¤æ—¥å¿—
ccnexus logs --filter provider=openai
ccnexus logs --filter level=error
ccnexus logs --filter component=routing

# å¯¼å‡ºæ—¥å¿—
ccnexus logs --export --format json --output logs.json
```

## æ›´æ–°æ—¥å¿—

### v1.5.0 (æœ€æ–°)
- ğŸ‰ æ–°å¢æ™ºèƒ½è´Ÿè½½å‡è¡¡ç®—æ³•
- âœ¨ æ”¯æŒè‡ªå®šä¹‰æä¾›å•†é…ç½®
- ğŸ”§ æ”¹è¿›å¥åº·æ£€æŸ¥æœºåˆ¶
- ğŸ› ä¿®å¤å¹¶å‘è¯·æ±‚å¤„ç†é—®é¢˜

### v1.4.0
- ğŸš€ æ–°å¢æˆæœ¬åˆ†æå’Œä¼˜åŒ–å»ºè®®
- âœ¨ æ”¯æŒåŠ¨æ€é…ç½®æ›´æ–°
- ğŸ¨ æ”¹è¿›ç›‘æ§ç•Œé¢
- ğŸ“Š å¢å¼ºç»Ÿè®¡åˆ†æåŠŸèƒ½

### v1.3.0
- ğŸ’¾ æ–°å¢æ™ºèƒ½ç¼“å­˜æœºåˆ¶
- ğŸ” æ”¹è¿›è¯·æ±‚è·¯ç”±ç®—æ³•
- âš¡ ä¼˜åŒ–æ€§èƒ½å’Œå“åº”é€Ÿåº¦
- ğŸ“š å®Œå–„æ–‡æ¡£å’ŒAPI

### v1.2.0
- ğŸ”„ é‡æ„æ ¸å¿ƒæ¶æ„
- âœ¨ æ”¯æŒå¤šç­–ç•¥è·¯ç”±
- ğŸ¨ æ–°å¢é…ç½®çƒ­é‡è½½
- ğŸ”§ å¢å¼ºå®‰å…¨åŠŸèƒ½

### v1.1.0
- ğŸ‰ é¦–ä¸ªå…¬å¼€å‘å¸ƒ
- âš¡ åŸºç¡€APIç½‘å…³åŠŸèƒ½
- ğŸ”§ å¤šæä¾›å•†æ”¯æŒ
- ğŸ“‹ ç›‘æ§å’Œç»Ÿè®¡

## è´¡çŒ®æŒ‡å—

æ¬¢è¿ä¸º CCNexus é¡¹ç›®è´¡çŒ®ä»£ç ï¼

### å¼€å‘ç¯å¢ƒ
```bash
# å…‹éš†ä»“åº“
git clone https://github.com/lich0821/ccNexus.git
cd ccNexus

# å®‰è£…ä¾èµ–
go mod download

# è¿è¡Œæµ‹è¯•
go test ./...

# å¯åŠ¨å¼€å‘æ¨¡å¼
go run cmd/ccnexus/main.go --dev
```

### ä»£ç è´¡çŒ®
1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
3. ç¼–å†™æµ‹è¯•
4. æäº¤ Pull Request

### æ’ä»¶å¼€å‘
- å‚è€ƒ [æ’ä»¶å¼€å‘æŒ‡å—](https://github.com/lich0821/ccNexus/blob/main/docs/PLUGIN_DEVELOPMENT.md)
- ä½¿ç”¨æ’ä»¶æ¨¡æ¿å¿«é€Ÿå¼€å§‹
- éµå¾ªæ’ä»¶å¼€å‘è§„èŒƒ

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚è¯¦æƒ…è¯·å‚é˜… [LICENSE](https://github.com/lich0821/ccNexus/blob/main/LICENSE) æ–‡ä»¶ã€‚

## ç›¸å…³èµ„æº

- [GitHub ä»“åº“](https://github.com/lich0821/ccNexus)
- [å®˜æ–¹æ–‡æ¡£](https://ccnexus.docs.com/)
- [API æ–‡æ¡£](https://ccnexus.docs.com/api/)
- [ç”¨æˆ·ç¤¾åŒº](https://github.com/lich0821/ccNexus/discussions)
- [é…ç½®ç¤ºä¾‹](https://github.com/lich0821/ccNexus/tree/main/examples)

## è‡´è°¢

æ„Ÿè°¢ä»¥ä¸‹é¡¹ç›®å’Œç¤¾åŒºçš„æ”¯æŒï¼š
- [OpenAI API](https://openai.com/api/) - AI æœåŠ¡æä¾›å•†
- [Anthropic API](https://docs.anthropic.com/claude/reference) - AI æœåŠ¡æä¾›å•†
- [Google Gemini API](https://ai.google.dev/) - AI æœåŠ¡æä¾›å•†
- Go è¯­è¨€ç¤¾åŒºçš„è´¡çŒ®è€…ä»¬

---

> ğŸ’¡ **æç¤º**: CCNexus æ˜¯ä¸€ä¸ªæ´»è·ƒå¼€å‘çš„å¼€æºé¡¹ç›®ï¼Œå¦‚æœä½ è§‰å¾—æœ‰ç”¨ï¼Œè¯·è€ƒè™‘ç»™é¡¹ç›®ä¸€ä¸ª Starï¼Œæˆ–è€…å‚ä¸è´¡çŒ®ä»£ç ï¼è®©ä½ çš„ AI API ç®¡ç†æ›´åŠ æ™ºèƒ½å’Œé«˜æ•ˆï¼